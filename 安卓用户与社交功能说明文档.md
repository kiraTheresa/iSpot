ğŸ“± iSpot å®‰å“å‰ç«¯åŠŸèƒ½è¯´æ˜æ–‡æ¡£ï¼ˆç”¨æˆ·ä¸ç¤¾äº¤æ¨¡å—ï¼‰
ğŸ§© ä¸€ã€é¡¹ç›®æ¦‚è¿°

æœ¬åº”ç”¨ä¸ºä¸€æ¬¾æ¨¡æ‹Ÿç¤¾äº¤å®šä½å¹³å° iSpot çš„å®‰å“å‰ç«¯å®ç°ï¼Œ
ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

ç”¨æˆ·æ³¨å†Œ / ç™»å½•

ç”¨æˆ·èµ„æ–™å±•ç¤ºä¸ç¼–è¾‘

åŠ¨æ€å‘å¸ƒã€æµè§ˆä¸ç‚¹èµ

æœ¬åœ° Fake åç«¯æœåŠ¡ï¼ˆFakeApiServiceï¼‰æ¨¡æ‹Ÿäº¤äº’

åº”ç”¨é‡‡ç”¨ Kotlin + Retrofit + RecyclerView æŠ€æœ¯æ ˆæ„å»ºï¼Œ
ä¸ä¾èµ–çœŸå®æœåŠ¡å™¨ï¼Œé€šè¿‡ FakeApiService æ¨¡æ‹Ÿåç«¯è¡Œä¸ºï¼Œæ–¹ä¾¿æœ¬åœ°è°ƒè¯•ã€‚

ğŸ§  äºŒã€æ¶æ„ç»“æ„
com.ispot.android
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ model               # æ•°æ®æ¨¡å‹ï¼ˆUser, Postï¼‰
â”‚   â”œâ”€â”€ network             # ç½‘ç»œå±‚ï¼ˆApiServiceã€FakeApiServiceã€FakeCallï¼‰
â”‚   â”œâ”€â”€ repository          # æ•°æ®ä»“åº“ï¼ˆUserRepositoryã€PostRepositoryï¼‰
â”‚   â””â”€â”€ network/dto         # ç½‘ç»œè¯·æ±‚ä¸å“åº”æ¨¡å‹ï¼ˆLoginRequest, RegisterResponse ç­‰ï¼‰
â”œâ”€â”€ ui
â”‚   â”œâ”€â”€ login               # ç™»å½•é¡µé¢ LoginActivity
â”‚   â”œâ”€â”€ register            # æ³¨å†Œé¡µé¢ RegisterActivity
â”‚   â”œâ”€â”€ feed                # åŠ¨æ€åˆ—è¡¨ FeedFragmentã€PostAdapter
â”‚   â”œâ”€â”€ post                # å‘å¸ƒåŠ¨æ€ PostActivity
â”‚   â””â”€â”€ user                # ç”¨æˆ·ä¿¡æ¯é¡µ UserActivity
â””â”€â”€ utils                   # è¾…åŠ©å·¥å…·ï¼ˆSessionManagerï¼‰

ğŸ‘¤ ä¸‰ã€ç”¨æˆ·æ¨¡å—ï¼ˆUser Moduleï¼‰
1ï¸âƒ£ ç™»å½•åŠŸèƒ½ï¼ˆLoginActivityï¼‰

åŠŸèƒ½æè¿°ï¼š
ç”¨æˆ·è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼Œç‚¹å‡»ç™»å½•åè°ƒç”¨ FakeApiService.login() æ¨¡æ‹Ÿåç«¯éªŒè¯ã€‚

ä¸»è¦é€»è¾‘ï¼š

NetworkModule.apiService.login(LoginRequest(u, p))
    .enqueue(object : Callback<LoginResponse> {
        override fun onResponse(...) {
            val body = response.body()
            if (body?.user != null) {
                session.saveToken(body.token ?: "")
                session.saveUserId(body.user.id)
                startActivity(Intent(this@LoginActivity, FeedActivity::class.java))
            } else {
                Toast.makeText(..., "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯", ...)
            }
        }
    })


çŠ¶æ€ç®¡ç†ï¼š

ä½¿ç”¨ SessionManager ä¿å­˜ç™»å½• token å’Œ userId

ç™»å½•æˆåŠŸè‡ªåŠ¨è·³è½¬è‡³ FeedActivity

2ï¸âƒ£ æ³¨å†ŒåŠŸèƒ½ï¼ˆRegisterActivityï¼‰

åŠŸèƒ½æè¿°ï¼š
è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼Œç‚¹å‡»æ³¨å†Œï¼Œè°ƒç”¨ FakeApiService.register() è¿›è¡Œæ¨¡æ‹Ÿæ³¨å†Œã€‚

é€»è¾‘ï¼š

NetworkModule.apiService.register(RegisterRequest(u, p, n))
    .enqueue(object : Callback<RegisterResponse> {
        override fun onResponse(...) {
            Toast.makeText(..., body.message, ...)
        }
    })


æœ¬åœ°éªŒè¯ï¼š

æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºç©º

è‹¥ç”¨æˆ·åå·²å­˜åœ¨ï¼ˆFake å†…éƒ¨æ ¡éªŒï¼‰ï¼Œè¿”å›æç¤ºä¿¡æ¯

3ï¸âƒ£ ç”¨æˆ·ä¿¡æ¯é¡µï¼ˆUserActivityï¼‰

åŠŸèƒ½æè¿°ï¼š
æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™ï¼ˆå¤´åƒã€æ˜µç§°ã€ç®€ä»‹ï¼‰ï¼Œå¯ç¼–è¾‘å¹¶ä¿å­˜ã€‚

å…³é”®ç‚¹ï¼š

è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ â†’ UserRepository.getUser(userId)

ç¼–è¾‘èµ„æ–™å â†’ FakeApiService.updateUser(user)

æ›´æ–°æˆåŠŸåå¼¹å‡ºæç¤ºå¹¶è¿”å›ä¸Šå±‚ç•Œé¢

æ”¯æŒå­—æ®µï¼š

æ˜µç§°ï¼ˆnicknameï¼‰

å¤´åƒåœ°å€ï¼ˆavatarUrlï¼‰

ç®€ä»‹ï¼ˆbioï¼‰

ğŸ—ï¸ å››ã€åŠ¨æ€æ¨¡å—ï¼ˆFeed / Post Moduleï¼‰
1ï¸âƒ£ åŠ¨æ€åˆ—è¡¨ï¼ˆFeedFragmentï¼‰

åŠŸèƒ½æè¿°ï¼š
å±•ç¤ºæ‰€æœ‰ç”¨æˆ·åŠ¨æ€ï¼ˆç”± FakeApiService.getAllPosts() æä¾›ï¼‰ï¼Œæ”¯æŒç‚¹èµã€‚

UI ç»„ä»¶ï¼š

RecyclerView + PostAdapter

æ¯æ¡åŠ¨æ€å±•ç¤ºï¼š

ç”¨æˆ·å¤´åƒ / æ˜µç§°

å†…å®¹æ–‡æœ¬

å‘å¸ƒæ—¶é—´ï¼ˆtimestamp è½¬æ¢ï¼‰

ç‚¹èµæŒ‰é’®ï¼ˆç‚¹å‡»è°ƒç”¨ likePostï¼‰

é€»è¾‘ï¼š

NetworkModule.apiService.getAllPosts()
    .enqueue(object : Callback<List<Post>> { ... })


ç‚¹èµåŠŸèƒ½ï¼š

NetworkModule.apiService.likePost(postId)


æœ¬åœ°æ¨¡æ‹Ÿå¢åŠ  likeCount å¹¶åˆ·æ–°åˆ—è¡¨ã€‚

2ï¸âƒ£ å‘å¸ƒåŠ¨æ€ï¼ˆPostActivityï¼‰

åŠŸèƒ½æè¿°ï¼š
è¾“å…¥æ–‡å­—å†…å®¹ï¼Œç‚¹å‡»å‘å¸ƒåè°ƒç”¨ FakeApiService.createPost() åˆ›å»ºæ–°åŠ¨æ€ã€‚

é€»è¾‘ï¼š

val request = CreatePostRequest(userId, content, imageUrl)
NetworkModule.apiService.createPost(request)
    .enqueue(object : Callback<Post> { ... })


æˆåŠŸåï¼š

æ˜¾ç¤ºâ€œå‘å¸ƒæˆåŠŸâ€

è·³è½¬å› Feed é¡µé¢å¹¶åˆ·æ–°

ğŸ’¾ äº”ã€æ•°æ®ä¸è¯·æ±‚æ¨¡å‹
ç±»å	ç”¨é€”	ä¸»è¦å­—æ®µ
User	ç”¨æˆ·æ¨¡å‹	id, username, password, nickname, avatarUrl, bio, lastActiveTime
Post	åŠ¨æ€æ¨¡å‹	id, userId, content, imageUrl, timestamp, likeCount
LoginRequest	ç™»å½•è¯·æ±‚ä½“	username, password
LoginResponse	ç™»å½•å“åº”ä½“	success, message, user, token
RegisterRequest	æ³¨å†Œè¯·æ±‚ä½“	username, password, nickname
RegisterResponse	æ³¨å†Œå“åº”ä½“	success, message
CreatePostRequest	å‘å¸–è¯·æ±‚ä½“	userId, content, imageUrl
ğŸ§© å…­ã€æ ¸å¿ƒç±»è¯´æ˜
ğŸ”¹ FakeApiService

æœ¬åœ°æ¨¡æ‹Ÿåç«¯æ¥å£å®ç°ï¼Œæä¾›ï¼š

ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æ›´æ–°èµ„æ–™

åŠ¨æ€åˆ›å»ºã€ç‚¹èµã€è·å–åˆ—è¡¨

å†…éƒ¨ä½¿ç”¨ FakeCall æ¨¡æ‹Ÿ Retrofit çš„å¼‚æ­¥å›è°ƒã€‚

ğŸ”¹ FakeCall

å®ç° Call<T> æ¥å£ï¼Œç«‹å³è¿”å› Response.success(...)ï¼Œ
ç”¨äºæ— ç½‘ç»œç¯å¢ƒä¸‹æµ‹è¯• Retrofit å›è°ƒé€»è¾‘ã€‚

ğŸ”¹ NetworkModule

ç»Ÿä¸€æä¾› apiService å®ä¾‹ã€‚
ç›®å‰è¿”å› FakeApiService()ï¼Œå¯æ›¿æ¢ä¸ºçœŸå® Retrofit æœåŠ¡ã€‚
